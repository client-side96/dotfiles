# Plugins
set-environment -g TMUX_PLUGIN_MANAGER_PATH "~/.tmux/plugins/"

set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"

set -g status-style bg=default
set -g status-left-length 20

set -g @plugin "tmux-plugins/tmux-resurrect"

set -g @resurrect-processes "ssh hx vim nvim btm lazygit lazydocker"
set -g @resurrect-dir "$HOME/.tmux/resurrect"

set -g @plugin "tmux-plugins/tmux-continuum"
set -g @continuum-restore "on"

# No delay on ESC
set -sg escape-time 0

# True color and italics support
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",*256col*:Tc"
set-option -sa terminal-features ",xterm-256color:RGB"

setw -g mode-keys vi

bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

set -g mouse on

bind-key "P" display-popup -E -w 20% -h 20% "sesh connect \"$(
 sesh list -i -t | gum filter --limit 1 --no-sort --fuzzy --placeholder 'Pick session' --height 50 --prompt='⚡  '
)\""
bind-key "K" display-popup -E -w 20% -h 20% "sesh connect \"$(
 tmux list-windows | awk -F': ' '{print $2}' | awk -F'(' '{print $1}' | gum filter --limit 1 --no-sort --fuzzy --placeholder 'Window' --height 50 --prompt='  '
)\""
bind-key "G" display-popup -E -w 95% -h 95% -d'#{pane_current_path}' "lazygit"
bind-key "N" display-popup -w 20% -h 100% -x 250% -y 0 -d '#{pane_current_path}' "yazi"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run "~/.tmux/plugins/tpm/tpm"
